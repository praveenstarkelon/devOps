<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dynamic Splash - Particle Color from Background</title>
  <style>
    html, body {
      height: 100%;
      margin: 0; padding: 0; 
      overflow: hidden;
      background: #071223;
    }
    canvas {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      display: block;
      z-index: 1;
      pointer-events: auto;
    }
    .version-label {
      position: absolute;
      top: 16px; left: 50%; transform: translateX(-50%);
      background: #112c41e6;
      padding: 5px 18px;
      color: #c7ffe8;
      font-family: monospace;
      border-radius: 8px;
      border: 1px solid #2fdabb80;
      font-weight: bold;
      letter-spacing: 2px;
      font-size: 17px;
      z-index: 4;
      box-shadow: 0 4px 12px #22b68a44;
      user-select: none;
    }
    .hint {
      position: absolute;
      left: 50%; top: 55px; transform: translateX(-50%);
      background: #102023b3;
      color: #bafee7;
      font-family: monospace;
      padding: 7px 18px;
      border-radius: 8px;
      font-size: 17px;
      letter-spacing: 1px;
      z-index: 3;
    }
  </style>
</head>
<body>
  <div class="version-label">
    v2.0 - Dynamic Splash (Based on Background Color)
  </div>
  <div class="hint">
    Click anywhere to splash!<br>
    (Particles match the background color)
  </div>
  <canvas id="splash"></canvas>
  <script>
    // ---- Setup ----
    const canvas = document.getElementById("splash");
    const ctx = canvas.getContext("2d");
    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      // Draw background: Gradient (change to image if you want)
      let grad = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
      grad.addColorStop(0, "#071223");
      grad.addColorStop(0.33, "#176876");
      grad.addColorStop(0.66, "#14b88f");
      grad.addColorStop(1, "#00ffc0");
      ctx.fillStyle = grad;
      ctx.fillRect(0,0,canvas.width,canvas.height);
    }
    resize();
    window.addEventListener("resize", resize);

    // ---- Particle system ----
    let particles = [];
    function getPixelColor(x, y) {
      const pixel = ctx.getImageData(x, y, 1, 1).data;
      return `rgba(${pixel[0]},${pixel[1]},${pixel[2]},${(pixel[3]/255).toFixed(2)})`;
    }
    function splash(x, y) {
      let clr = getPixelColor(x, y);
      for(let i=0; i<80; i++) {
        let angle = (Math.PI * 2) * Math.random();
        let speed = 4 + Math.random()*2.5;
        particles.push({
          x: x + (Math.random() - 0.5)*12,
          y: y + (Math.random() - 0.5)*12,
          dx: Math.cos(angle) * speed,
          dy: Math.sin(angle) * speed,
          r: 5 + Math.random()*8,
          alpha: 1,
          color: clr
        });
      }
    }
    canvas.addEventListener("mousedown", e => splash(e.clientX, e.clientY));

    function draw() {
      // Redraw BG (draw your bg/image/gradient here)
      let grad = ctx.createLinearGradient(0,0,canvas.width,canvas.height);
      grad.addColorStop(0, "#071223");
      grad.addColorStop(0.33, "#176876");
      grad.addColorStop(0.66, "#14b88f");
      grad.addColorStop(1, "#00ffc0");
      ctx.fillStyle = grad;
      ctx.fillRect(0,0,canvas.width,canvas.height);

      // --- particles
      for(let i=particles.length-1; i>=0; i--) {
        let p=particles[i];
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, 2 * Math.PI);
        ctx.fillStyle = p.color;
        ctx.globalAlpha = p.alpha;
        ctx.shadowColor = p.color;
        ctx.shadowBlur = 18;
        ctx.fill();
        ctx.globalAlpha = 1;
        ctx.shadowBlur = 0;
        p.x += p.dx;
        p.y += p.dy;
        p.dx *= 0.93;
        p.dy *= 0.93;
        p.r *= 0.97;
        p.alpha -= 0.012;
        if(p.alpha <= 0.01 || p.r < 1) particles.splice(i, 1);
      }
      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>
</html>
